<!doctype html>
<html>
    <head>
                <title>性能测试 - 吴振浩的笔记本</title>

            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">

            
            <link rel="canonical" href="https://jokerlovering.github.io/File/test/%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/">
            

            
                <link  rel="icon" type="image/x-icon" href="../../../assets/favicon.ico">
            
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
                        <script>hljs.initHighlightingOnLoad();</script>
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
            <link rel="stylesheet" href="../../../assets/css/bootstrap.min.css">
            <link rel="stylesheet" href="../../../assets/css/main.min.css">
                <script src="../../../search/main.js"></script>

            
                
            
    </head>

    <body>
        <div class="container py-3">
            <header>
                    <!-- block header -->
<nav class="navbar navbar-expand-xl border-bottom">
    <div class="container-fluid">
        
            <img class="logo" src="../../../assets/logo.png">
        

        
            <span class="normal fs-4 title-color site-name" id="component-site-name" style="text-transform: uppercase;">吴振浩的笔记本</span>
        

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsMenu"
            aria-controls="navbarsMenu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse flex-column ml-auto" id="navbarsMenu">
            <ul class="navbar-nav">

                <!-- block menu -->
                <li class="nav-item">
                    <!-- block menu -->
    
        <li class="nav-item" id="component-menu">
            <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="
                            nav-link text-gray text-decoration-none" href="../../..">[主页]</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class=" active 
                            nav-link dropdown-toggle text-decoration-none" href="#" data-bs-toggle="dropdown">[测试]</a>
                            <ul class="dropdown-menu">
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95/" class="dropdown-item text-decoration-none ">软件测试</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../%E5%8A%9F%E8%83%BD%E6%B5%8B%E8%AF%95/" class="dropdown-item text-decoration-none ">功能测试</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/" class="dropdown-item text-decoration-none ">接口测试</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="./" class="dropdown-item text-decoration-none  active ">性能测试</a>
    </li>
<!-- endblock -->
                                    <!-- block dropdown-menu -->
    <li>
        <a href="../liunx%E5%91%BD%E4%BB%A4/" class="dropdown-item text-decoration-none ">Liunx命令</a>
    </li>
<!-- endblock -->
                            </ul>
                        </li>
            </ul>
        </li>
<!-- endblock -->
                </li>
                <!-- endblock -->

                <!-- block search -->
                <li class="nav-item">
                    <a class="collapsed" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
                        <div class="md-search-icon">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </div>
                    </a>
                </li>
                <!--  endblock -->

                <!-- block source -->
                <li class="nav-item">
                    
                        
                            <!-- block source -->
<div class="md-source source-detail">
  <div class="md-source-repo-icon">
    <i class="fa fa-github-alt" aria-hidden="true"></i>
  </div>

  <div class="md-source-repo-url">
    <a href="https://github.com/JokerLovering/lovebooks.git.io" class="md-source">
      JokerLovering/Books
    </a>

    <ul class="md-source-repo-text">
      <li>
        <i class="fa fa-tag" aria-hidden="true"></i>
        <img alt="GitHub tag (latest by date)"
          src="https://img.shields.io/github/v/tag/JokerLovering/Books?color=white&label=%20&style=flat-square">
      </li>

      <li>
        <i class="fa fa-star" aria-hidden="true"></i>
        <img alt="GitHub Repo stars"
          src="https://img.shields.io/github/stars/JokerLovering/Books?color=white&label=%20&style=flat-square">
      </li>

      <li>
        <i class="fa fa-code-fork" aria-hidden="true"></i>
        <img alt="GitHub forks"
          src="https://img.shields.io/github/forks/JokerLovering/Books?color=white&label=%20&style=flat-square">
      </li>
    </ul>
  </div>

</div>
<!--  endblock -->
                        
                    
                </li>
                <!--  endblock -->
            </ul>
        </div>
    </div>
</nav>
<!--  endblock -->
            </header>

            <main><!-- block search -->
<div class="collapse" id="collapseExample">
    <div role="search" class="search-box">
        <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
            <input type="text" name="q" class="search-query"
            placeholder="Search docs" title="Type search term here" />
        </form>
    </div>
</div>
<!-- endblock -->
                    <!-- block content -->
<section class="container post">
    <article>
        <header>
            
                <h1 class="bold title" id="component-title">性能测试</h1>
            
        </header>
        <p><p>时间：系统处理请求的响应时间<br />资源：系统在运行过程中，系统资源消耗的情况
<a name="W4lzd"></a></p>
<h2 id="1"><strong>1、什么是性能测试</strong><a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<p>是使用自动化工具，对软件各项性能指标进行测试和评估的过程
<a name="ukANV"></a></p>
<h2 id="2"><strong>2、性能测试的目的</strong><a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<p>评估当前系统的能力<br />寻找性能瓶颈，优化性能<br />评估软件是否满足未来的需求
<a name="uOtGe"></a></p>
<h2 id="3"><strong>3、什么项目适合性能测试</strong><a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<p>基础功能要完成，并且保证系统是处于稳定的状态<br />项目用户人数比较多，或者并发量比较大<br />有单独的测试环境（性能测试环境）
<a name="Ud0si"></a></p>
<h2 id="4"><strong>4、性能测试分类</strong><a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<p>负载测试<br />稳定性测试<br />并发测试<br />压力测试
<a name="KCTGc"></a></p>
<h2 id="5"><strong>5、负载测试</strong><a class="headerlink" href="#5" title="Permanent link">&para;</a></h2>
<p>通过逐步增加系统的负载，确定满足系统性能指标（比如：响应时间等）情况下，找出系统能够承受的最大负载量<br />作用：系统最大负载量达到用户要求时，系统才能正式上线
<a name="GMfxc"></a></p>
<h2 id="6"><strong>6、稳定性测试</strong><a class="headerlink" href="#6" title="Permanent link">&para;</a></h2>
<p>在服务器稳定运行（用户正常的业务负载下）的情况下长时间测试（1天----1周）,并最终保证服务器能满足线上业务需求。<br />作用：系统在用户要求的业务负载下运行达到规定时间时，系统才可以正式上线使用
<a name="GxZIJ"></a></p>
<h2 id="7"><strong>7、并发测试</strong><a class="headerlink" href="#7" title="Permanent link">&para;</a></h2>
<p>在极短的时间内，发送多个请求来验证服务器对并发的处理能力<br />适用场景：抢红包，秒杀，抢购
<a name="Yr2Zf"></a></p>
<h2 id="8"><strong>8、压力测试</strong><a class="headerlink" href="#8" title="Permanent link">&para;</a></h2>
<p>在强负载下的测试，查看系统在峰值情况下是否功能隐患，系统是否具有良好的容错能力和恢复能力<br />负载和压力测试<br />    负载测试是以并发维度出发，在不断增加并发的情况下，查看系统的性能指标<br />    压力测试是以访问时间维度出发，在并发量一定的情况下不断增加访问时间的情况下，查看系统的性能指标。</p>
<p>并发测试：同一时间，同一时刻，同时请求，查看在这个时间内服务器的运行情况
<a name="k9byM"></a></p>
<h2 id="9"><strong>9、性能指标</strong><a class="headerlink" href="#9" title="Permanent link">&para;</a></h2>
<p><a name="RldVb"></a></p>
<h5 id="_1">响应时间<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h5>
<p>从客户端发送请求，到客户端收到服务器响应的总时间
<a name="Clxce"></a></p>
<h5 id="_2">并发用户数<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h5>
<p>同一时间向服务器发送请求的用户数
<a name="lDxln"></a></p>
<h5 id="_3">吞吐量<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h5>
<p>指单位时间内处理客户端请求数量。
<a name="pty0b"></a></p>
<h5 id="tps">TPS(每秒事务数)<a class="headerlink" href="#tps" title="Permanent link">&para;</a></h5>
<p>指系统每秒能够处理事务和交易的数量 tps= 并发数/平均响应时间
<a name="CFTFN"></a></p>
<h5 id="qps">QPS（每秒查询率）<a class="headerlink" href="#qps" title="Permanent link">&para;</a></h5>
<p>一台服务器每秒能够响应的查询次数
<a name="odM6f"></a></p>
<h5 id="pv">PV（点击数）<a class="headerlink" href="#pv" title="Permanent link">&para;</a></h5>
<p>页面访问量，用户访问一次计算一次 （点击页面必须发送请求才会计算）
<a name="phcVn"></a></p>
<h5 id="uv">UV(独立访客数)<a class="headerlink" href="#uv" title="Permanent link">&para;</a></h5>
<p>访问页面的一台客户端为一个访客，相同的访客只会记录一次
<a name="h1o5T"></a></p>
<h5 id="_4">错误率<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h5>
<p>指系统在负载情况下，失败的业务概率
<a name="BrBkI"></a></p>
<h2 id="10"><strong>10、资源利用率</strong><a class="headerlink" href="#10" title="Permanent link">&para;</a></h2>
<p>cpu使用率<br />不高于 75%-85%<br />内存（大小）使用率 <br />不高于 80%<br />磁盘IO(速率) <br />不高于 90%<br />网络（速率）<br />不高于80%
<a name="CCuEn"></a></p>
<h2 id="11"><strong>11、性能测试流程</strong><a class="headerlink" href="#11" title="Permanent link">&para;</a></h2>
<ol>
<li>性能测试需求分析<br />2. 性能测试计划及方案<br />3. 性能测试用例设计<br />4. 性能测试执行<br />5. 性能测试分析和调优<br />6. 性能测试报告总结</li>
</ol>
<p><a name="T0eBt"></a></p>
<h2 id="12"><strong>12、需求分析</strong><a class="headerlink" href="#12" title="Permanent link">&para;</a></h2>
<p>测试范围，测试目的<br />测试人员分工<br />测试时间安排<br />测试的方法
<a name="pZR8a"></a></p>
<h2 id="13"><strong>13、性能关注指标</strong><a class="headerlink" href="#13" title="Permanent link">&para;</a></h2>
<p>cpu 使用率 不超过75-85%<br />内存 使用率 不超过 80%<br />磁盘IO 使用率 不超过90%<br />网络 不超过 80%<br />响应时间 单接口（不超过 500ms） 混合接口 不超过2 s<br />错误率 为 0<br />吞吐量 （tps）大于或等于需求规定<br />在规定时间内达到规定的pv量<br />宽带使用率符合规定
<a name="fDpHj"></a></p>
<h2 id="14jmeter-gui"><strong>14、jmeter运行 （非 GUI模式）</strong><a class="headerlink" href="#14jmeter-gui" title="Permanent link">&para;</a></h2>
<p>GUI 会消耗系统服务器部分性能，导致压测不准确，或者导致 GUI界面卡死，部分请求会死掉，压测被迫中断。<br />非GUI模式是通过命令去触发脚本，并且不用实时渲染数据，这样减少了对资源的浪费<br />准备：<br />1.  需要有压测脚本<br />    2.  需要有报告存放地址（空文件夹）<br />    3.   jtl 文件存放地址 （电脑路径+文件.jtl）<br />命令：<br />在 jmeter的bin路径下<br />jmeter -n -t "压测脚本" -l jtl文件 -e -o 报告地址<br />-n 非GUI模式运行<br />-t 执行测试文件脚本位置<br />-l 指定生成测试结果存放文件<br />-e 测试结束后生成测试报告<br />-o 指定测试报告位置
<a name="RA1vp"></a></p>
<h2 id="15"><strong>15、性能瓶颈</strong><a class="headerlink" href="#15" title="Permanent link">&para;</a></h2>
<p>网络宽带<br />系统瓶颈 （cpu 内存）<br />数据库瓶颈 <br />应用本身问题（如 项目问题）<br />应用服务瓶颈 （如 nginx apache linux）
<a name="evxBY"></a></p>
<h2 id="16"><strong>16、性能调优</strong><a class="headerlink" href="#16" title="Permanent link">&para;</a></h2>
<p>一般优化都是测试提建议，开发或者运维调优<br />像 硬件问题，网络宽带，系统瓶颈，服务瓶颈这些 提给运维<br />像 数据库，代码逻辑复杂，程序本身的问题 提给开发去修复</p>
<pre><code>注：性能一般数据库出问题的可能性较大，一般都是 用 非关系数据库解决，或者读写分离



程序本身代码复杂，可以让 开发优化算法，优化代码，优化设计，参数调优，时间换空间，空间换时间
</code></pre>
<p><a name="jgz6H"></a></p>
<h2 id="17tps"><strong>17、TPS上不去（压测过程中）</strong><a class="headerlink" href="#17tps" title="Permanent link">&para;</a></h2>
<p>网络宽带<br />硬件问题（cpu 内存）<br />项目逻辑复杂，项目本身问题<br />系统架构<br />数据库问题<br />压测脚本配置问题<br />==通信连接机制问题（cdn ）内容分发网络==<br />连接池过少，造成请求等待<br />垃圾回收机制问题
<a name="FqaXD"></a></p>
<h2 id="18"><strong>18、性能测试测试的哪一种策略</strong><a class="headerlink" href="#18" title="Permanent link">&para;</a></h2>
<p>压力测试
<a name="AwDos"></a></p>
<h2 id="19"><strong>19、压力测试场景</strong><a class="headerlink" href="#19" title="Permanent link">&para;</a></h2>
<pre><code>1. 全链路

2. 单场景压测

    1. 下单

    2. 领取优惠券
</code></pre>
<p><a name="DkXQg"></a></p>
<h2 id="19_1"><strong>19、压测是长压还是短压</strong><a class="headerlink" href="#19_1" title="Permanent link">&para;</a></h2>
<p>短压 一般都是 活动时长 0-30分钟 0-60分钟
<a name="LUBom"></a></p>
<h2 id="20"><strong>20、压测线程多少</strong><a class="headerlink" href="#20" title="Permanent link">&para;</a></h2>
<p>注册用户 % 20 ====在线用户<br />在线用户 %30 ===== 线程（并发用户数）<br />500 <br />阶梯式压测，最终压测到的500 
<a name="gx7wm"></a></p>
<h2 id="21"><strong>21、分布式压测</strong><a class="headerlink" href="#21" title="Permanent link">&para;</a></h2>
<p>并发量较小的情况下不采用分布式压测<br />jmeter最大 支持1000的并发，超过1000并发考虑分布式压测<br />一个主控制机然后连接到其他多个执行机进行分布式，把执行机的ip 配置到对应的文件里面，然后远程启动执行机进行压测<br />压测时间 ： 30分钟 <br />线程数： 500<br />pv: 90万+<br />uv: 2000<br />tps: 180----250
<a name="sXkYK"></a></p>
<h2 id="22"><strong>22、性能拐点</strong><a class="headerlink" href="#22" title="Permanent link">&para;</a></h2>
<p>指的是当并发量达到一定的数量，平均响应时间，tps不增反降，当前并发数就是该测试的拐点。
<a name="FfFZZ"></a></p>
<h2 id="23"><strong>23、性能测试流程</strong><a class="headerlink" href="#23" title="Permanent link">&para;</a></h2>
<p>首先先进行需求分析，把需要压测的非功能点整理出来，因为高并发会影响公司同事的正常工作，需要有单独的性能测试环境，和线上环境保持一致，接下来准备压测的脚本编写，使用jmeter工具，配置压测线程组 http请求、tps折线图、响应时间折线图、聚合报告、查看结果树，配置压测策略，配置阶梯式压测逐步增压，知道达到或者超过我们的预期，之前我们压测20分钟，压测到500<br />在压测过程中也会出现问题，压测到300的时候压测的时候压不上去，当时tps达不到我们的预期，通过调优的方式解决，最后压测到500<br />在压测过程中我还会使用top、iftop、vmstart、iostart去关注服务器的cpu、内存、磁盘情况，如果有问题我会暂停压测，我们的cpu和内存使用率不能超过80%，最后压测完生成测试报告，报告主要分析的有：响应时间是否在我们的预期内，单线程不超过500ms，多线程不超过2s，请求错误率为零，tps是否等于或者大于我们的需求规定内，带宽是否符合规定，是否在规定时间内达到一定的pv量，这就是性能测试的流程。
<a name="J4jtd"></a></p>
<h2 id="24"><strong>24、性能测试出现什么问题</strong><a class="headerlink" href="#24" title="Permanent link">&para;</a></h2>
<p>性能测试要求达到500的并发量，但是压测到300的时候就压测不上去，tps也达不到我们的预期，当时进行瓶颈分析的时候，认为是项目瓶颈，当时数据库响应过慢，因为当时只用了MySQL数据库，每秒只能处理2w条左右数据，解决的方案是：加入一个非关系型数据库redis，每秒可以处理10w条左右的数据，redis是将数据存放当缓存中，速度比较快，调优之后，再次压测，指标都达到了我们的预期。</p>
<p><a name="VRVTT"></a></p>
<h2 id="25"><strong>25、性能拐点</strong><a class="headerlink" href="#25" title="Permanent link">&para;</a></h2>
<p>并发量达到一定的数量，平均响应时间，tps不增反降，当前并发数就是测试的系统性能拐点。
<a name="AfCCL"></a></p>
<h2 id="26"><strong>26、测试计划</strong><a class="headerlink" href="#26" title="Permanent link">&para;</a></h2>
<p>测试范围 测试目的 测试人员 人员分配 任务分工 测试时间安排 测试的方法</p></p>
    </article>
</section>
<!-- endblock -->
            </main>

            
                    <!-- block preview -->
        <div class="row row-cols-md-3 text-center pt-md-3" id="component-preview">
            <div class="col themed-grid-col">
                <a rel="prev" href="../%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/" class="nav-link">
                    <i class="fa fa-arrow-left"></i> Previous
                </a>
            </div>
            <div class="col themed-grid-col"></div>
            <div class="col themed-grid-col">
                <a rel="next" href="../liunx%E5%91%BD%E4%BB%A4/" class="nav-link">
                    Next <i class="fa fa-arrow-right"></i>
                </a>
            </div>
        </div>
<!-- endblock -->
            

            
                   <!-- block footer -->
<footer class="pt-4 my-md-5 pt-md-5 border-top" id="component-footer">
    <div class="row">
        <div class="col-12 col-md">
                <!-- block copyright -->
    <small class="d-block mb-3">Joker Lovering</small>

    <small class="d-block mb-3">
        listen to me
        <a href="https://jokerlovering.github.io/" target="_blank" rel="noopener">
            There is always something you can do, and succeed at.
        </a>
    </small>

<!-- endblock -->
        </div>
    </div>
</footer>
<!-- endblock -->
            
        </div>

            <script>var base_url = '../../..';</script>
            <script src="../../../assets/js/jquery-3.3.1.slim.min.js""></script>
            <script src="../../../assets/js/bootstrap.bundle.min.js""></script>
            <script src="../../../assets/js/main.min.js""></script>
                <script src="../../../search/main.js" defer></script>

    </body>

</html>